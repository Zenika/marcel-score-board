<template>
	<main class="msc-page">
		<StatusAlert :last-update-date="lastUpdateDate" :is-updating="isUpdating"/>
		<div class="msc-top-bar">
			<svg width="282" height="104" viewBox="0 0 282 104" fill="none" xmlns="http://www.w3.org/2000/svg">
				<rect width="290" height="104" transform="translate(-19 0.179688) rotate(-7)" fill="#D8232A"></rect>
				<path d="M20.5998 45.6931L21.7914 31.8391L19.0581 32.1747L19.361 28.5837L28.8406 27.4197L28.5377 31.0108L25.7694 31.3507L24.5778 45.2046L20.5998 45.6931ZM28.7767 44.6891L30.4161 26.1165L34.2312 25.648L33.9157 29.0399C33.8908 29.3499 33.8518 29.6735 33.7987 30.0106C33.7534 30.3467 33.697 30.6882 33.6293 31.035C33.5608 31.374 33.4912 31.7052 33.4208 32.0287L33.4906 32.0202C33.6832 31.6659 33.8975 31.3602 34.1336 31.1029C34.3696 30.8457 34.6399 30.6433 34.9445 30.4957C35.2482 30.3403 35.5977 30.2384 35.9932 30.1898C36.567 30.1193 37.0717 30.1912 37.5073 30.4053C37.9497 30.6107 38.3046 30.9371 38.572 31.3844C38.8463 31.823 39.0225 32.3602 39.1005 32.9961C39.1338 33.2675 39.1477 33.5728 39.1421 33.9119C39.1433 34.2423 39.132 34.5665 39.108 34.8842L38.361 43.5123L34.5459 43.9807L35.1917 36.4513C35.2224 36.1248 35.243 35.8114 35.2533 35.511C35.2627 35.2029 35.2498 34.9054 35.2146 34.6185C35.1879 34.4014 35.1137 34.2137 34.992 34.0555C34.8702 33.8973 34.6775 33.8343 34.4139 33.8667C34.2665 33.8848 34.1162 33.9741 33.9627 34.1346C33.8092 34.2951 33.6705 34.5759 33.5466 34.9768C33.4217 35.3699 33.3246 35.925 33.2552 36.6419L32.6151 44.2178L28.7767 44.6891ZM45.5661 42.8637C44.6666 42.9742 43.8698 42.8949 43.1756 42.6259C42.4882 42.3483 41.9295 41.9013 41.4997 41.285C41.0688 40.661 40.7973 39.8915 40.6849 38.9765C40.5583 37.9452 40.5529 36.8754 40.6687 35.767C40.7844 34.6587 41.0542 33.6181 41.4778 32.6452C41.9005 31.6645 42.5002 30.8431 43.2769 30.181C44.0526 29.5111 45.0336 29.1034 46.22 28.9577C47.3289 28.8216 48.2703 29.0208 49.0444 29.5555C49.8253 30.0814 50.2795 30.8639 50.4071 31.903C50.5051 32.7017 50.4348 33.4108 50.196 34.0305C49.9572 34.6502 49.5782 35.1847 49.0588 35.6342C48.5384 36.0759 47.898 36.4379 47.1377 36.7201C46.3842 36.9937 45.5344 37.1886 44.5884 37.3047L44.3441 37.3347C44.3371 37.4694 44.3343 37.6075 44.336 37.7489C44.3444 37.8817 44.3553 38.0024 44.3686 38.1109C44.4486 38.7623 44.6288 39.2046 44.9093 39.4377C45.1889 39.6632 45.5729 39.7459 46.0614 39.6859C46.6353 39.6155 47.1467 39.4858 47.5958 39.2968C48.0448 39.1079 48.5761 38.7868 49.1895 38.3337L49.538 41.1717C48.8895 41.7236 48.2379 42.1224 47.5833 42.3681C46.9286 42.6138 46.2563 42.779 45.5661 42.8637ZM44.5929 34.5532L44.6395 34.5475C45.3141 34.4646 45.8255 34.3349 46.1738 34.1584C46.5221 33.9818 46.7517 33.7686 46.8627 33.5189C46.9737 33.2691 47.0116 33.0008 46.9764 32.7138C46.9469 32.4735 46.8417 32.2896 46.6607 32.1623C46.4866 32.0262 46.2793 31.973 46.039 32.0025C45.8218 32.0291 45.6186 32.1367 45.4292 32.3253C45.2389 32.5061 45.0721 32.7824 44.9289 33.1542C44.7924 33.5172 44.6804 33.9836 44.5929 34.5532ZM62.3185 44.6794L60.8208 40.9434C60.7665 40.9501 60.7074 40.9495 60.6435 40.9416C60.5805 40.9415 60.5175 40.9413 60.4545 40.9412C59.5922 40.9054 58.8542 40.6969 58.2407 40.3157C57.6349 39.9336 57.1478 39.3637 56.7793 38.6061C56.4185 37.8475 56.1672 36.8905 56.0253 35.7351C55.9158 34.8434 55.882 33.9266 55.9238 32.9848C55.9656 32.043 56.0839 31.1154 56.2787 30.2021C56.4803 29.28 56.7594 28.4114 57.1158 27.5963C57.4722 26.7811 57.9094 26.0466 58.4273 25.3927C58.9452 24.7387 59.5448 24.2047 60.2259 23.7904C60.9149 23.3753 61.6858 23.1153 62.5388 23.0106C64.2525 22.8002 65.5531 23.1363 66.4408 24.0191C67.3352 24.8932 67.8981 26.2724 68.1295 28.1567C68.218 28.8778 68.2551 29.6604 68.2406 30.5044C68.2252 31.3406 68.1488 32.1922 68.0112 33.0592C67.8737 33.9261 67.6625 34.7707 67.3778 35.5928C67.0998 36.4061 66.7401 37.1626 66.2986 37.8623C65.8572 38.5619 65.3244 39.1586 64.7002 39.6524L66.8897 44.1181L62.3185 44.6794ZM61.5308 37.3024C61.8953 37.2577 62.2154 37.0767 62.4913 36.7595C62.775 36.4413 63.0162 36.0338 63.2149 35.5372C63.4128 35.0327 63.5724 34.4739 63.6939 33.8608C63.8232 33.2467 63.9156 32.6214 63.9713 31.9849C64.026 31.3406 64.0525 30.7234 64.0509 30.1333C64.0483 29.5354 64.0189 29.0077 63.9628 28.5502C63.8733 27.8213 63.7141 27.2938 63.4851 26.9677C63.2552 26.6339 62.9697 26.4879 62.6285 26.5298C62.264 26.5745 61.9439 26.7555 61.668 27.0728C61.3911 27.3822 61.1499 27.7897 60.9443 28.295C60.7456 28.7917 60.585 29.3427 60.4625 29.9481C60.3401 30.5535 60.2476 31.1788 60.1852 31.824C60.1295 32.4606 60.1025 33.0739 60.1041 33.664C60.1057 34.2542 60.1351 34.7819 60.1922 35.2471C60.2655 35.8442 60.3605 36.2969 60.4771 36.6053C60.6004 36.905 60.7507 37.1031 60.9278 37.1994C61.1049 37.2957 61.3059 37.33 61.5308 37.3024ZM72.8883 39.509C72.2679 39.5851 71.7293 39.5253 71.2723 39.3296C70.8144 39.126 70.4488 38.8089 70.1755 38.378C69.9013 37.9394 69.7251 37.4022 69.6471 36.7663C69.6137 36.4949 69.596 36.1902 69.5938 35.852C69.5994 35.5128 69.6079 35.1654 69.6194 34.8098L70.3809 26.2037L74.196 25.7352L73.5473 33.2413C73.5136 33.6075 73.4934 33.9563 73.4869 34.2877C73.4881 34.6182 73.5021 34.8919 73.5287 35.1091C73.5611 35.3727 73.629 35.573 73.7324 35.7098C73.8357 35.8467 73.9999 35.9013 74.2247 35.8737C74.4961 35.8404 74.715 35.6679 74.8814 35.3562C75.0556 35.0436 75.1941 34.633 75.2969 34.1245C75.3998 33.616 75.4766 33.0556 75.5273 32.4433L76.1501 25.4953L79.9535 25.0283L78.7917 38.548L75.7327 38.9236L75.6037 37.3927L75.5223 37.4027C75.318 37.7899 75.0808 38.1339 74.8107 38.4346C74.5485 38.7345 74.2553 38.9751 73.9312 39.1566C73.6159 39.3449 73.2682 39.4623 72.8883 39.509ZM80.9552 38.2823L82.1519 24.7584L85.9437 24.2928L84.7703 37.8139L80.9552 38.2823ZM84.2629 23.2004C83.6736 23.2728 83.2168 23.2069 82.8926 23.0026C82.5685 22.7984 82.3764 22.4521 82.3164 21.9636C82.2688 21.5759 82.3021 21.1743 82.4164 20.7588C82.5385 20.3424 82.7616 19.9805 83.086 19.673C83.4171 19.3569 83.8657 19.164 84.4317 19.0945C84.99 19.026 85.439 19.0929 85.7787 19.2952C86.1184 19.4975 86.3183 19.8429 86.3782 20.3314C86.4677 21.0603 86.3181 21.7005 85.9293 22.252C85.5473 22.7948 84.9918 23.1109 84.2629 23.2004ZM86.2475 37.6325L86.4459 35.3059L91.0733 26.9334L87.3629 27.389L87.6535 24.0828L95.7257 23.0917L95.5065 25.6335L91.0642 33.7825L94.9956 33.2997L94.7267 36.5914L86.2475 37.6325Z" fill="black"></path>
				<path d="M22.4778 90.8003L22.9322 85.0772L34.6841 61.7446L25.1463 62.9157L25.746 55.876L44.3563 53.591L43.899 59.2908L32.1153 82.5565L42.2114 81.3169L41.5766 88.4552L22.4778 90.8003ZM41.5891 97.4032L42.0728 91.5349L60.6133 89.2584L60.083 95.1325L41.5891 97.4032ZM63.3273 85.7846L66.3396 50.8918L74.6677 49.8692C76.8389 49.6026 78.6332 49.7286 80.0508 50.2472C81.4683 50.7659 82.5624 51.5997 83.3332 52.7487C84.1021 53.8822 84.5865 55.2631 84.7864 56.8915C84.9864 58.5199 84.9594 60.2234 84.7055 62.002C84.4497 63.765 83.9063 65.4296 83.0754 66.9957C82.2599 68.5598 81.1165 69.8888 79.645 70.9825C78.1872 72.0588 76.3494 72.7331 74.1317 73.0054L72.2707 73.2339L71.2832 84.8077L63.3273 85.7846ZM72.8704 66.1943L73.4287 66.1258C74.2817 66.021 74.9753 65.6446 75.5097 64.9965C76.0441 64.3485 76.4132 63.5082 76.617 62.4756C76.8344 61.4257 76.8631 60.2493 76.7032 58.9466C76.5889 58.0161 76.3267 57.4186 75.9164 57.1541C75.5061 56.8897 74.9132 56.805 74.1378 56.9003L73.7191 56.9517L72.8704 66.1943ZM86.311 82.9625L89.3232 48.0697L97.2791 47.0929L96.1369 60.2914L101.999 59.5716L103.188 46.3674L111.144 45.3905L108.085 80.289L100.129 81.2659L101.388 66.7071L95.5254 67.4269L94.2668 81.9857L86.311 82.9625ZM125.031 78.6806C122.782 78.9567 120.872 78.782 119.299 78.1565C117.741 77.5135 116.501 76.3906 115.58 74.7878C114.657 73.1694 114.033 71.0343 113.707 68.3823C113.488 66.5988 113.42 64.7653 113.504 62.8817C113.587 60.9981 113.824 59.1429 114.214 57.3162C114.617 55.4721 115.175 53.7348 115.888 52.1046C116.601 50.4743 117.475 49.0052 118.511 47.6974C119.547 46.3895 120.746 45.3213 122.108 44.4929C123.486 43.6625 125.028 43.1426 126.734 42.9332C130.161 42.5123 132.763 43.1847 134.538 44.9503C136.327 46.6984 137.453 49.4568 137.915 53.2253C138.102 54.7452 138.171 56.3975 138.123 58.1823C138.088 59.9498 137.907 61.7508 137.582 63.5854C137.254 65.4045 136.77 67.1642 136.128 68.8644C135.487 70.5646 134.654 72.1152 133.63 73.5161C132.619 74.8996 131.398 76.0491 129.968 76.9646C128.553 77.8782 126.907 78.4502 125.031 78.6806ZM124.718 71.5169C125.447 71.4274 126.087 71.0654 126.639 70.4309C127.206 69.7946 127.689 68.9797 128.086 67.9863C128.482 66.9775 128.801 65.8599 129.044 64.6337C129.303 63.4055 129.488 62.1549 129.599 60.8819C129.708 59.5933 129.761 58.3589 129.758 57.1786C129.753 55.9828 129.694 54.9274 129.582 54.0124C129.403 52.5546 129.084 51.4996 128.627 50.8474C128.167 50.1797 127.596 49.8878 126.913 49.9716C126.184 50.0611 125.544 50.4231 124.992 51.0575C124.439 51.6765 123.956 52.4914 123.545 53.5021C123.148 54.4955 122.826 55.5975 122.581 56.8083C122.337 58.019 122.152 59.2696 122.027 60.5601C121.915 61.8332 121.861 63.0598 121.865 64.2401C121.868 65.4204 121.927 66.4758 122.041 67.4063C122.187 68.6004 122.377 69.5059 122.611 70.1227C122.857 70.7221 123.158 71.1181 123.512 71.3108C123.866 71.5034 124.268 71.5721 124.718 71.5169ZM140.513 76.3073L143.526 41.4145L152.761 40.2806C154.312 40.0901 155.797 40.136 157.217 40.4182C158.653 40.6985 159.87 41.3203 160.87 42.2838C161.868 43.2317 162.481 44.6362 162.71 46.4972C162.872 47.8155 162.8 49.0915 162.495 50.3254C162.204 51.5418 161.663 52.6473 160.872 53.6417C160.081 54.6362 159.025 55.4585 157.703 56.1087L157.726 56.2948C158.805 56.6189 159.721 57.2856 160.475 58.2951C161.226 59.289 161.696 60.5459 161.882 62.0657C162.12 64.0043 161.897 65.905 161.213 67.7679C160.542 69.6134 159.39 71.1953 157.758 72.5134C156.125 73.8316 153.998 74.6516 151.377 74.9734L140.513 76.3073ZM149.063 68.4333L150.505 68.2562C151.342 68.1534 152.011 67.8273 152.51 67.278C153.008 66.7132 153.339 66.0191 153.506 65.1958C153.688 64.3706 153.724 63.5082 153.613 62.6087C153.511 61.7713 153.255 61.1651 152.847 60.7901C152.452 60.3978 151.906 60.2445 151.208 60.3302L149.743 60.5101L149.063 68.4333ZM150.292 54.0198L151.571 53.8627C152.285 53.7751 152.87 53.475 153.326 52.9624C153.783 52.4499 154.108 51.8275 154.301 51.0953C154.493 50.3477 154.543 49.6016 154.452 48.8572C154.368 48.1748 154.126 47.6772 153.725 47.3643C153.325 47.0514 152.768 46.9387 152.054 47.0263L150.914 47.1663L150.292 54.0198ZM165.125 73.2854L168.184 38.3868L176.14 37.41L173.081 72.3085L165.125 73.2854ZM175.617 71.9972L186.103 36.045L196.245 34.7997L200.973 68.8838L192.482 69.9263L191.854 63.2736L186.062 63.9848L184.34 70.926L175.617 71.9972ZM187.819 56.7559L191.448 56.3103L190.738 47.448C190.675 46.6842 190.614 45.9283 190.554 45.18C190.493 44.4318 190.463 43.6091 190.463 42.7117L190.3 42.7317C190.262 43.5708 190.186 44.3672 190.074 45.1209C189.976 45.8571 189.842 46.6291 189.674 47.4369L187.819 56.7559Z" fill="white"></path>
				<path d="M215.031 54.9104L215.434 58.1904C215.455 58.3558 215.473 58.5529 215.491 58.7817C215.513 59.0046 215.531 59.2595 215.546 59.5463L215.615 59.5378C215.778 59.0665 216.004 58.7056 216.293 58.4549C216.587 58.1984 216.936 58.0454 217.339 57.9959C218.14 57.8975 218.802 58.2046 219.325 58.917C219.853 59.6236 220.204 60.6903 220.379 62.117C220.495 63.0631 220.496 63.8816 220.382 64.5725C220.272 65.2629 220.053 65.8067 219.724 66.2039C219.395 66.6011 218.964 66.8324 218.432 66.8978C218.029 66.9473 217.666 66.9 217.344 66.7559C217.021 66.6066 216.707 66.333 216.401 65.935L216.308 65.9465L216.203 67.0141L214.885 67.1759L213.403 55.1103L215.031 54.9104ZM217.04 59.473C216.668 59.5187 216.393 59.6732 216.215 59.9364C216.037 60.1944 215.933 60.5404 215.902 60.9745C215.871 61.4034 215.89 61.9021 215.96 62.4708L216.008 62.8662C216.129 63.8485 216.334 64.5605 216.625 65.0023C216.92 65.4384 217.31 65.6266 217.796 65.5669C218.23 65.5136 218.525 65.2229 218.681 64.6948C218.836 64.1615 218.848 63.365 218.718 62.3053C218.595 61.3076 218.398 60.5736 218.125 60.1033C217.857 59.6273 217.495 59.4172 217.04 59.473ZM220.544 57.7519L222.242 57.5434L223.915 61.9978C223.986 62.1937 224.055 62.3899 224.121 62.5865C224.192 62.7824 224.255 62.974 224.309 63.1615C224.369 63.3483 224.421 63.5335 224.464 63.7171L224.526 63.7095C224.525 63.4472 224.536 63.1704 224.558 62.8791C224.579 62.5826 224.611 62.2613 224.652 61.9151L225.15 57.1864L226.833 56.9798L225.465 66.9946C225.373 67.6565 225.235 68.2008 225.051 68.6274C224.873 69.0534 224.637 69.3788 224.345 69.6036C224.057 69.8278 223.702 69.9659 223.278 70.018C223.128 70.0364 222.979 70.0416 222.831 70.0335C222.688 70.0248 222.54 70.0115 222.385 69.9938L222.208 68.5515C222.316 68.5698 222.422 68.5829 222.528 68.5909C222.639 68.5983 222.744 68.5959 222.842 68.5839C223.044 68.5591 223.206 68.492 223.329 68.3824C223.458 68.2774 223.56 68.1048 223.635 67.8646C223.716 67.6238 223.785 67.29 223.843 66.8631L223.955 65.9835L220.544 57.7519ZM236.759 64.4901L231.238 65.168L231.083 63.904L233.619 54.8792L230.099 55.3115L229.916 53.8227L235.267 53.1657L235.422 54.4296L232.883 63.4312L236.574 62.978L236.759 64.4901ZM239.562 55.2672C240.178 55.1917 240.712 55.2939 241.167 55.574C241.62 55.8489 241.986 56.2631 242.264 56.8167C242.542 57.3703 242.726 58.0219 242.819 58.7715L242.941 59.7718L238.847 60.2745C238.969 61.1831 239.203 61.8445 239.547 62.2587C239.896 62.6671 240.371 62.8345 240.971 62.7608C241.307 62.7196 241.624 62.6334 241.923 62.5022C242.221 62.3659 242.53 62.168 242.849 61.9083L243.021 63.3041C242.724 63.5347 242.403 63.7184 242.057 63.8553C241.712 63.9921 241.335 64.0856 240.927 64.1358C240.172 64.2284 239.537 64.1201 239.022 63.8109C238.505 63.4964 238.098 63.0217 237.8 62.3866C237.507 61.751 237.306 60.9963 237.199 60.1227C237.08 59.156 237.089 58.3259 237.224 57.6323C237.359 56.9388 237.623 56.3922 238.014 55.9925C238.405 55.5877 238.921 55.3459 239.562 55.2672ZM239.746 56.5671C239.348 56.6159 239.058 56.8404 238.876 57.2406C238.694 57.6407 238.64 58.243 238.712 59.0474L241.279 58.7323C241.224 58.2877 241.129 57.898 240.994 57.563C240.857 57.2229 240.684 56.9635 240.473 56.7847C240.267 56.6053 240.025 56.5328 239.746 56.5671ZM247.377 54.292C248.08 54.2056 248.646 54.3907 249.074 54.847C249.508 55.3028 249.786 56.0243 249.907 57.0117L250.616 62.7887L248.988 62.9886L248.33 57.6304C248.251 56.9842 248.116 56.5075 247.926 56.2002C247.736 55.8878 247.457 55.7541 247.09 55.7991C246.593 55.8601 246.265 56.1339 246.104 56.6207C245.949 57.1068 245.937 57.8823 246.067 58.9472L246.6 63.2818L244.971 63.4818L243.915 54.8823L245.21 54.7233L245.525 55.8732L245.633 55.8599C245.723 55.5655 245.849 55.3087 246.011 55.0894C246.172 54.8649 246.368 54.6861 246.598 54.5529C246.828 54.4145 247.087 54.3275 247.377 54.292ZM253.12 53.7522L254.175 62.3516L252.555 62.5506L251.499 53.9511L253.12 53.7522ZM251.914 50.5391C252.23 50.5004 252.471 50.5627 252.638 50.7258C252.805 50.889 252.909 51.136 252.949 51.4668C252.988 51.7873 252.942 52.0476 252.809 52.2476C252.681 52.4417 252.466 52.5572 252.167 52.594C251.872 52.6302 251.631 52.5706 251.444 52.4151C251.262 52.2539 251.151 52.013 251.111 51.6925C251.069 51.3513 251.115 51.0833 251.249 50.8885C251.382 50.6937 251.604 50.5772 251.914 50.5391ZM256.269 49.8471L256.961 55.4844C257.001 55.8153 257.036 56.1416 257.065 56.4634C257.094 56.78 257.109 57.0982 257.112 57.418L257.174 57.4103C257.237 57.1979 257.307 56.9978 257.383 56.81C257.465 56.6164 257.542 56.4363 257.616 56.2698L259.059 53.0228L260.812 52.8077L259.075 56.4842L261.999 61.391L260.232 61.608L258.119 57.8688L257.385 58.9351L257.75 61.9127L256.122 62.1127L254.64 50.047L256.269 49.8471ZM264.56 52.1821C265.377 52.0818 266.011 52.2638 266.461 52.7279C266.912 53.1921 267.198 53.9179 267.319 54.9053L268.025 60.6512L266.815 60.7997L266.413 59.6447L266.375 59.6495C266.255 59.958 266.112 60.2248 265.945 60.4499C265.779 60.675 265.578 60.8519 265.342 60.9806C265.111 61.1138 264.833 61.2004 264.508 61.2404C264.048 61.2969 263.658 61.2214 263.339 61.014C263.019 60.8014 262.767 60.5044 262.584 60.1228C262.4 59.7413 262.281 59.3256 262.226 58.8759C262.119 58.0022 262.282 57.3026 262.716 56.7771C263.155 56.2509 263.827 55.9112 264.732 55.7582L265.749 55.5782L265.692 55.113C265.62 54.534 265.485 54.1176 265.286 53.864C265.087 53.6103 264.799 53.5066 264.422 53.553C264.179 53.5828 263.923 53.6614 263.656 53.7887C263.392 53.9102 263.107 54.0869 262.8 54.3188L262.177 53.1595C262.507 52.8934 262.871 52.6781 263.271 52.5136C263.676 52.3485 264.105 52.238 264.56 52.1821ZM265.895 56.7094L265.218 56.8319C264.7 56.9271 264.33 57.122 264.109 57.4168C263.888 57.7115 263.808 58.1096 263.87 58.611C263.926 59.0711 264.048 59.4025 264.236 59.6051C264.429 59.8071 264.672 59.89 264.967 59.8538C265.365 59.8049 265.657 59.5749 265.843 59.1638C266.028 58.7475 266.079 58.206 265.997 57.5391L265.895 56.7094Z" fill="#FCEE07"></path>
			</svg>
		</div>
	  <div class="content">
		  <div class="msc-page__header">
			  <h2 class="msc-title">Résultats du Quiz</h2>
			  <p class="msc-subtitle" v-if="scores.length === 0">
				  Aucun score à afficher !
			  </p>
		  </div>
		  <div class="msc-top-score" v-if="scores.length > 0">
			  <ScoreCard v-for="(score, index) in scores.slice(0, 3)" :key="score[0]" :score="score" :index="index"/>
		  </div>
		  <table class="msc-score-table" v-if="scores.length > 3">
			  <thead>
			  <tr>
				  <th>Rang et Pseudo</th>
				  <th>Bonnes réponses</th>
				  <th>Temps</th>
			  </tr>
			  </thead>
			  <tbody>
			  <tr v-for="(score, index) in scores.slice(3, 10)" :key="score[0]">
				  <td>
					  <div class="msc-score-table__pseudo">
						  <div class="msc-score-table__rank">
							  <span>{{ index + 4 }}</span>
						  </div>
						  {{ score[0] }}
					  </div>
				  </td>
				  <td>{{ score[3] }}</td>
				  <td> {{ score[2] }}</td>
			  </tr>
			  </tbody>
		  </table>
	  </div>
  </main>
</template>
<script setup lang="ts">
import {onMounted, onUnmounted, ref} from 'vue';
import StatusAlert from '@/components/ScoreBoard/StatusAlert.vue';
import ScoreCard from '@/components/ScoreBoard/ScoreCard.vue';

const REFRESH_RATE: number = 60 * 5;
let refreshLoop: number;

const isUpdating = ref<boolean>(true);
const lastUpdateDate = ref<string>("");
let scores = ref<Array<Array<string>>>([]);

const SPREADSHEET_ID: string = "1U5A97xU_V6hAa4p2_pvPZQL4552lRpqSObL5H1CB9oI";

async function loadSpreadSheet(apiKey: any): Promise<void> {
  isUpdating.value = true;
  const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/A2:E?key=${apiKey}`, {
    method: "GET",
  });
  const data = await response.json();
  isUpdating.value = false;
  if (data.values)
    updateScore(data.values);
  else
    updateScore([]);
}

function updateScore(values: Array<Array<string>>) {
  const date = new Date(Date.now())
  lastUpdateDate.value = formatDate(date.toString());
  scores.value = values;
  scores.value.sort(sortScore);
  localStorage.setItem("scores", JSON.stringify(scores.value));
  localStorage.setItem("lastUpdated", JSON.stringify(Date.now()));
}

function sortScore(a:Array<string>, b: Array<string>) {
	if (parseInt(a[3]) < parseInt(b[3]))
		return 1;
	if (parseInt(a[3]) === parseInt(b[3]))
		return a[2] < b[2] ? -1 : 1;
	return -1;
}

function formatDate(value: string): string {
  const now = new Date(value);
  const date = now.toLocaleDateString('fr');
  const hour = now.toLocaleTimeString('fr').split(":").slice(0, 2).join(":");
  return `${date} ${hour}`;
}

onMounted(() => {
  // last data used
  const oldScores = localStorage.getItem("scores");
  if (oldScores) scores.value = JSON.parse(oldScores);

  // update data
	const lastUpdated = localStorage.getItem("lastUpdated");
	const shouldRefresh = lastUpdated && Date.now() - parseInt(lastUpdated) > 300000;
	if (lastUpdated && oldScores && !shouldRefresh) {
		lastUpdateDate.value = formatDate(new Date(parseInt(lastUpdated)).toString());
		isUpdating.value = false;
	} else
		loadSpreadSheet("AIzaSyCasDc28gfYMH1La9vxH3IMfHYgM_Yq8Rk");

	refreshLoop = setInterval(() => loadSpreadSheet("AIzaSyCasDc28gfYMH1La9vxH3IMfHYgM_Yq8Rk"), REFRESH_RATE * 1000);
});

onUnmounted(() => {
	clearInterval(refreshLoop);
});

</script>

<style lang="scss" scoped>
@import '@/assets/scss/colors';

.msc-page {
	position: absolute;
	top: 0;
	left: 0;
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: center;
	background: transparentize($black, .6);
	height: 100vh;
	width: 100vw;
	overflow: hidden;

	&:before {
		position: absolute;
		content: "";
		left: 0;
		top: 0;
		height: 100%;
		width: 100%;
		background: url("/src/assets/bg.png");
		background-repeat: no-repeat;
		background-size: cover;
		z-index: -1;
	}

	* {
		color: $black;
		font-family: 'Open Sans', sans-serif;
	}

	&__header {
		display: flex;
		flex-direction: column;
		gap: 2rem;
		width: 100%;
	}
}

.content {
	display: flex;
	flex-direction: column;
	justify-content: flex-start;
	align-items: center;
	gap: 4rem;
	width: 100%;
	max-width: calc(1440px + 4rem);
	padding: 0 2rem;
}

.msc-top-bar {
	width: 100%;
	display: flex;
	padding-right: 2rem;
}

.msc-zenika-logo {
	background: url("../quizz-icon.svg");
}

.msc-title {
	font-size: 3rem;
	font-weight: bold;
	text-align: left;
	color: $white;
	width: 100%;
	line-height: 3rem;
}

.msc-subtitle {
	font-size: 1.25rem;
	font-weight: bold;
	text-align: left;
	color: $white;
}

.msc-top-score {
	display: flex;
	gap: 2rem;
	width: 100%;
}

.msc-score-table {
	position: relative;
	width: 100%;
	border-collapse: separate;
	border-spacing: 0 .5rem;

	thead th {
		color: $yellow;
		text-align: left;

		&:first-child {
			padding-left: 1.5rem;
		}

		&:last-child {
			padding-right: 1rem;
			text-align: right;
		}
	}

	tbody {
		tr {
			width: 100%;
			background-color: transparentize($black, .25);

			td:first-child {
				padding: 0;
				border-radius: .25rem 0 0 .25rem;
				// border-left-width: 1px;
			}

			td:last-child {
				padding: .5rem 1rem;
				border-radius: 0 .25rem .25rem 0;
				text-align: right;
				// border-right-width: 1px;
			}

			td {
				height: 3.5rem;
				color: $white;
				// border: 1px solid white;
				border-right-width: 0;
				border-left-width: 0;
				font-size: 1.2rem;
				overflow: hidden;
			}
		}
		width: 100%;
	}

	&__pseudo {
		display: flex;
		gap: 1.25rem;
		align-items: center;
		font-size: 1.25rem;
		line-height: 1.25rem;
		font-weight: 800;
		color: #d32b2d;
		text-transform: uppercase;
	}

	&__rank {
		margin-left: -.5rem;
		padding-left: .5rem;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		height: 3.5rem;
		width: 5rem;
		font-weight: bold;
		font-size: 1.25rem;
		background: $red;
		transform: skewX(-15deg);

		span {
			color: $white;
			transform: skewX(15deg);
		}
	}
}
</style>
